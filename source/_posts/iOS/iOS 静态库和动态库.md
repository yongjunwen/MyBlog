---
title:   iOS 静态库和动态库
tags:  [iOS-WIKI]
categories:  [iOS]
date:  2018-06-11 16:17:22
---


### 静态库和动态库的存在的形式

* 静态库：以.a 和 .framework为文件后缀名。

* 动态库：以.tbd(之前叫.dylib) 和 .framework 为文件后缀名。（系统直接提供给我们的framework都是动态库！）

理解：.a 是一个纯二进制文件，.framework 中除了有二进制文件之外还有资源文件。 .a ，要有 .h 文件以及资源文件配合， .framework 文件可以直接使用。总的来说，.a + .h + sourceFile = .framework。所以创建静态库最好还是用.framework的形式

 
### 静态库和动态库的区别

　**不同点：** 

* 静态库在链接时，会被完整的复制到可执行文件中，如果多个App都使用了同一个静态库，那么每个App都会拷贝一份，缺点是浪费内存。类似于定义一个基本变量，使用该基本变量是是新复制了一份数据，而不是原来定义的；
* 动态库不会复制，只有一份，程序运行时动态加载到内存中，系统只会加载一次，多个程序共用一份，节约了内存。类似于使用变量的内存地址一样，使用的是同一个变量；

 **共同点：**
* 静态库和动态库都是闭源库，只能拿来满足某个功能的使用，不会暴露内部具体的代码信息
### 从源代码到app

>当我们点击了 build 之后，做了什么事情呢？

* 预处理（Pre-process）：把宏替换，删除注释，展开头文件，产生 .i 文件。
* 编译（Compliling）：把之前的 .i 文件转换成汇编语言，产生 .s文件。
* 汇编（Asembly）：把汇编语言文件转换为机器码文件，产生 .o 文件。
* 链接（Link）：对.o文件中的对于其他的库的引用的地方进行引用，生成最后的可执行文件（同时也包括多个 .o 文件进行 link）。

[引用](https://www.cnblogs.com/junhuawang/p/7598236.html)